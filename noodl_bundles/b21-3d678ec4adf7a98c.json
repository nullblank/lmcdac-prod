[{"name":"/#Supabase Prefab/Supabase Prefab/UI/User/Supabase - Sign Up","nodes":[{"id":"4d40dd25-61d7-200f-e929-56ee47bc0163","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"64ea39e0-82ab-fe53-d489-b70bcbd9b31d","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"04009f9d-0cce-a113-d07a-3df0ec6e2208","type":"JavaScriptFunction","parameters":{"functionScript":"// const supabase = Noodl.Variables.supabase;\n\n// const email = Inputs.email\n// const password = Inputs.password\nif (!Boolean(Noodl.Variables.supabase)) {\n  console.error(\"Supabase client is not configured !\")\n  return\n}\n\nlet { data, error } = await Noodl.Variables.supabase.auth.signUp({\n  email: Inputs.email,\n  password: Inputs.password,\n})\n\nconsole.log(\"[signup] data\", data);\nconsole.log(\"[signup] error\", error);\n\nif (error) {\n  Outputs.error = error\n  Outputs.isConnected = false\n  Outputs.Failure()\n} else {\n  Outputs.data = data\n  Noodl.Objects.currentSignee1.user = data.user\n  Outputs.isConnected = Boolean(data.session)\n  Outputs.Success()\n}\n\n"},"ports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-isConnected","displayName":"isConnected","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"50e40f2e-e411-28b0-8fa9-005c8310f07a","type":"JavaScriptFunction","parameters":{"functionScript":"if (!Boolean(Noodl.Variables.supabase)) {\r\n  console.error(\"Supabase client is not initialized\")\r\n  return\r\n}\r\n\r\nconst {data, error} = await Noodl.Variables.supabase.auth.getSession()\r\nconsole.log(\"data.session\", data.session)\r\n\r\nif (data.session) {\r\n  Noodl.Objects.currentUser.auth = data.session.user\r\n  Noodl.Objects.currentUser.session = data.session\r\n\r\n  Outputs.loggedIn = Boolean(data.session)\r\n} else {\r\n  Outputs.loggedIn = false\r\n}\r\n\r\nOutputs.Done()"},"ports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-loggedIn","displayName":"loggedIn","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]}],"connections":[{"sourceId":"4d40dd25-61d7-200f-e929-56ee47bc0163","sourcePort":"Do","targetId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","targetPort":"run"},{"sourceId":"4d40dd25-61d7-200f-e929-56ee47bc0163","sourcePort":"Email","targetId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","targetPort":"in-email"},{"sourceId":"4d40dd25-61d7-200f-e929-56ee47bc0163","sourcePort":"Password","targetId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","targetPort":"in-password"},{"sourceId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","sourcePort":"out-Success","targetId":"64ea39e0-82ab-fe53-d489-b70bcbd9b31d","targetPort":"Success"},{"sourceId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","sourcePort":"out-Failure","targetId":"64ea39e0-82ab-fe53-d489-b70bcbd9b31d","targetPort":"Failure"},{"sourceId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","sourcePort":"out-data","targetId":"64ea39e0-82ab-fe53-d489-b70bcbd9b31d","targetPort":"Data"},{"sourceId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","sourcePort":"out-isConnected","targetId":"64ea39e0-82ab-fe53-d489-b70bcbd9b31d","targetPort":"Is Connected"},{"sourceId":"04009f9d-0cce-a113-d07a-3df0ec6e2208","sourcePort":"out-error","targetId":"64ea39e0-82ab-fe53-d489-b70bcbd9b31d","targetPort":"Error"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"Email","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Data","type":"*","plug":"output","index":2},{"name":"Password","type":"*","group":"Inputs","plug":"input","index":2},{"name":"Error","type":"*","plug":"output","index":3},{"name":"First Name","type":"*","plug":"input","index":3},{"name":"Is Connected","type":"*","plug":"output","index":4},{"name":"Last Name","type":"*","plug":"input","index":4}],"roots":[]}]